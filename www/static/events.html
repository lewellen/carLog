<html>
  <head>
    <link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print"> 
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection">
    <![endif]-->

    <link rel="stylesheet" href="css/colorbox/colorbox.css" type="text/css"> 
 
    <link rel="stylesheet" href="css/index.css" type="text/css"> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.6.4/jquery.colorbox-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.0/vue.js"></script>
    <title>CarLog</title>
  </head>
  <body>

  <script type="text/javascript">
	$(document).ready(function() { 
		$.ajax({
			url : "/rest/vehicles/1/events",
			timeout: 3000,
			success : function(events) {
				new Vue({
					el: "#events",
					data : {
						entries : events,
					}
				});
			},
			fail : function() {
				$("#messageBox").text("Failed to load events");
			}
		});
	});
  </script>

  <div class="container showgrid">
    <div class="span-4">
      <h1>Car Log</h1>
    </div>
    <div class="span-20 last" style="text-align:right;">
      <a href="">Vehicles</a> | <a href="">Settings</a>
    </div>
  </div>

  <div class="container">
    <div class="span-18">
      <a href="index.html">Dashboard</a> | <a href="mileage.html">Mileage</a> | <a href="maintenance.html">Maintenance</a> | <a href="events.html">Events</a>
    </div>

    <div class="span-6 last" style="text-align:right;">
      <a href=""><img src="img/fugue/document-excel-csv.png" /> Export CSV</a> | <a href=""><img src="img/fugue/plus-circle.png" /> Add Entry</a>
    </div>

    <div id="messageBox" class="span-24 last"></div>

    <div id="events" class="span-24 last">
      <table>
        <thead>
          <tr>
            <th></th>
            <th>Date</th>
            <th>Description</th>
            <th>Odometer (mi)</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr class="editableRow" v-for="entry in entries">
            <td style="width:16px;"><a class="edit" v-bind:href="'/rest/events/' + entry.id" style="display:none;"><img src="img/fugue/pencil.png" /></a></td>
            <td>{{ entry.at }}</td>
            <td>{{ entry.description }}</td>
            <td>{{ entry.totalMileage }}</td>
            <td style="width:16px;"><a class="remove" v-bind:href="'/rest/events/' + entry.id" style="display:none;"><img src="img/fugue/minus-circle.png" /></a></td>
          </tr>
        </tbody>
        <tfoot>
        </tfoot>
      </table>
    </div>
  </div>
</html>
